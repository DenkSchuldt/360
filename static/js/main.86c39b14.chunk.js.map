{"version":3,"sources":["components/Header.js","components/Viewer.js","components/TagsDialog.js","components/index.js","index.js"],"names":["Header","style","className","target","rel","href","dayjs","locale","Viewer","props","id","idx","total","src","name","marker","date","tags","location","setCurrentIndex","anchoredTags","setAnchoredTags","openTagsDialog","history","useState","viewer","setViewer","index","setIndex","useEffect","replace","v","pano","window","PANOLENS","ImagePanorama","origin","container","document","getElementById","cameraFov","autoRotate","autoRotateSpeed","autoRotateActivationDuration","controlButtons","getCamera","translateX","translateY","clearAllCache","add","setPanorama","type","value","onKeyDown","e","key","x","parseInt","size","length","onChange","onClick","open","format","motion","div","map","tag","span","includes","filter","t","AnimatePresence","i","initial","scale","animate","exit","TagsDialog","onClose","setTags","slideIn","title","draggable","confirmText","onConfirmClick","onCloseClick","layoutTransition","App","useHistory","rawData","data","setData","JSON","parse","localStorage","getItem","console","log","setItem","stringify","storedId","URLSearchParams","search","get","findIndex","p","currentIndex","isTagsDialogVisible","setIsTagsDialogVisible","isPrevVisible","isNextVisible","array","d","some","reduce","a","c","button","computed","item","Set","addEventListener","ReactDOM","render","StrictMode","path","to"],"mappings":"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","file":"static/js/main.86c39b14.chunk.js","sourcesContent":["\nimport React from 'react';\n\nimport './Header.scss';\n\n\nconst Header = ({ style }) => {\n  return (\n    <header\n      style={style}\n      className='my-header'>\n      <h1>Aventuras en 360ยบ</h1>\n      <div>\n        <a\n          target='_blank'\n          rel='noopener noreferrer'\n          href='https://github.com/DenkSchuldt'>\n          <i className=\"fab fa-github\"></i>\n        </a>\n        <a\n          target='_blank'\n          rel='noopener noreferrer'\n          href='https://twitter.com/DenkSchuldt'>\n          <i className=\"fab fa-twitter\"></i>\n        </a>\n        <a\n          target='_blank'\n          rel='noopener noreferrer'\n          href='https://www.instagram.com/denkschuldt/'>\n          <i className=\"fab fa-instagram\"></i>\n        </a>\n      </div>\n    </header>\n  )\n}\n\nexport default Header;\n","\nimport dayjs from 'dayjs';\nimport es from 'dayjs/locale/es';\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport React, { useState, useEffect } from 'react';\n\nimport './Viewer.scss';\n\ndayjs.locale(\"es\");\n\n\nconst Viewer = props => {\n  const {\n    id, idx, total, src, name, marker, date, tags, location, setCurrentIndex,\n    anchoredTags, setAnchoredTags, openTagsDialog, history\n  } = props;\n  const [ viewer, setViewer ] = useState();\n  const [ index, setIndex ] = useState('');\n  useEffect(() => {\n    history.replace(`?id=${id}`);\n    setIndex(idx + 1);\n    let pano = new window.PANOLENS.ImagePanorama(`${window.location.origin}/360/images/${src}`);\n    let v;\n    if (viewer) {\n      v = viewer;\n    } else {\n      v = new window.PANOLENS.Viewer({\n        container: document.getElementById('myVwr'),\n        cameraFov: 65,\n        autoRotate: true,\n        autoRotateSpeed: 1,\n        autoRotateActivationDuration: 10000,\n        controlButtons: ['fullscreen', 'setting']\n      });\n      v.getCamera().translateX(500);\n      v.getCamera().translateY(-100);\n      setViewer(v);\n    }\n    v.clearAllCache();\n    v.add(pano);\n    v.setPanorama(pano);\n  }, [id, idx]);\n  return (\n    <div\n      className='my-vwr-wrapper'>\n      <div className='my-vwr-header'>\n        <span className='index'>\n          <input\n            type='number'\n            value={index}\n            onKeyDown={e => {\n              if (e.key === 'Enter') {\n                const x = parseInt(index)\n                if (x >= 1 && x <= total) {\n                  setCurrentIndex(x - 1);\n                }\n              }\n            }}\n            size={`${index}`.length}\n            onChange={e => setIndex(e.target.value)}/>\n          { `/${total}` }\n        </span>\n        <div className='content'>\n          <strong>\n            { name }\n          </strong>\n          <div>\n           { location }\n          </div>\n        </div>\n      </div>\n      <div\n        id='myVwr'\n        className='my-vwr'>\n        {\n          marker &&\n          <a\n            href={marker}\n            target='_blank'\n            className='my-vwr-marker'\n            rel='noopener noreferrer'\n            onClick={() => window.open(marker, '_blank')}>\n            <i className=\"fas fa-map-marked-alt\"></i>\n          </a>\n        }\n      </div>\n      <div className='my-vwr-footer'>\n        {\n          date &&\n          <>\n            <span className='dnk-date'>\n              { dayjs(date).format('MMMM, YYYY') }\n            </span>\n            <span className='dnk-dot'>&#183;</span>\n          </>\n        }\n        <motion.div className='dnk-tags'>\n          {\n            tags.map((tag, idx) => (\n              <motion.span\n                key={idx}\n                className='dnk-tag'\n                onClick={() => {\n                  setAnchoredTags(\n                    anchoredTags.includes(tag) ?\n                      anchoredTags.filter(t => t !== tag) :\n                      [ ...anchoredTags, tag]\n                  )\n                }}>\n                {`#${tag}`}\n                <AnimatePresence>\n                  {\n                    anchoredTags.includes(tag) &&\n                    <motion.i\n                      initial={{ scale: 0 }}\n                      animate={{ scale: 1 }}\n                      exit={{ scale: 0 }}\n                      className=\"fas fa-thumbtack\">\n                    </motion.i>\n                  }\n                </AnimatePresence>\n              </motion.span>\n            ))\n          }\n          {\n            tags.length > 0 &&\n            <motion.span\n              key={idx}\n              className='dnk-tag'\n              onClick={openTagsDialog}>\n              <i className=\"fas fa-plus-circle\"></i>\n            </motion.span>\n          }\n        </motion.div>\n      </div>\n    </div>\n  )\n}\n\nexport default Viewer;\n","\nimport React, { useState } from 'react';\nimport Dialog from '@denkschuldt/react-dialog';\nimport { motion, AnimatePresence } from \"framer-motion\";\n\nimport './TagsDialog.scss';\n\n\nconst TagsDialog = props => {\n  const { tags, onClose, setAnchoredTags } = props;\n  const [ anchoredTags, setTags ] = useState(props.anchoredTags);\n  return (\n    <Dialog\n      slideIn='bottom'\n      title='Hashtags'\n      draggable={false}\n      confirmText='Aplicar'\n      className='dnk-tags-dialog'\n      onConfirmClick={() => {\n        setAnchoredTags(anchoredTags);\n        onClose();\n      }}\n      onCloseClick={onClose}>\n      <div className='dnk-tags'>\n        {\n          tags.map((tag, idx) => (\n            <motion.span\n              key={idx}\n              layoutTransition\n              className='dnk-tag'\n              onClick={() => {\n                setTags(\n                  anchoredTags.includes(tag) ?\n                    anchoredTags.filter(t => t !== tag) :\n                    [ ...anchoredTags, tag]\n                )\n              }}>\n              {`#${tag}`}\n              <AnimatePresence>\n                {\n                  anchoredTags.includes(tag) &&\n                  <motion.i\n                    initial={{ scale: 0 }}\n                    animate={{ scale: 1 }}\n                    exit={{ scale: 0 }}\n                    className=\"fas fa-thumbtack\">\n                  </motion.i>\n                }\n              </AnimatePresence>\n            </motion.span>\n          ))\n        }\n      </div>\n    </Dialog>\n  );\n}\n\nexport default TagsDialog;\n","\nimport { motion } from \"framer-motion\";\nimport { useHistory } from \"react-router-dom\";\nimport React, { useState, useEffect } from 'react';\n\nimport Header from './Header';\nimport Viewer from './Viewer';\nimport TagsDialog from './TagsDialog';\n\nimport rawData from './../data.json';\n\nimport './index.scss';\n\nconst App = () => {\n  const history = useHistory();\n  const [ data, setData ] = useState(rawData);\n  const [ anchoredTags, setTags ] = useState(() => {\n    let tags = [];\n    try {\n      tags = JSON.parse(localStorage.getItem('my-tags') || '[]');\n    } catch (e) {\n      console.log(e);\n    }\n    return tags;\n  });\n  const setAnchoredTags = tags => {\n    setTags(tags);\n    localStorage.setItem('my-tags', JSON.stringify(tags));\n  }\n  const [ currentIndex, setIndex ] = useState(() => {\n    const id = new URLSearchParams(history.location.search).get('id');\n    let storedId = id || localStorage.getItem('my-id');\n    const idx = data.findIndex(p => p.id == storedId);\n    return idx >= 0 ? idx : 0;\n  });\n  const setCurrentIndex = (idx) => {\n    setIndex(idx);\n    localStorage.setItem('my-id', data[idx]?.id);\n  }\n  const [ isTagsDialogVisible, setIsTagsDialogVisible ] = useState(false);\n  const isPrevVisible = currentIndex > 0;\n  const isNextVisible = currentIndex < data.length - 1;\n  const previous = () => {\n    if (isPrevVisible) {\n      setCurrentIndex(currentIndex - 1);\n    }\n  }\n  const next = () => {\n    if (isNextVisible) {\n      setCurrentIndex(currentIndex + 1);\n    }\n  }\n  useEffect(() => {\n    const id = data[currentIndex].id;\n    if (anchoredTags.length) {\n      const array = rawData.filter(d => (\n        d.tags.some(t => anchoredTags.includes(t))\n      ));\n      const idx = array.findIndex(e => e.id == id);\n      setCurrentIndex(idx >= 0 ? idx : 0);\n      setData(array);\n    } else {\n      const idx = rawData.findIndex(e => e.id == id);\n      setCurrentIndex(idx >= 0 ? idx : 0);\n      setData(rawData);\n    }\n  }, [anchoredTags.reduce((a, c) => a + c, '')])\n  return (\n    <>\n      <Header/>\n      <main>\n        <motion.button\n          onClick={previous}\n          initial={{ scale: 0 }}\n          animate={{\n            scale: (!isPrevVisible || isTagsDialogVisible) ? 0 : 1\n          }}\n          className='my-btn-left'>\n          <i className=\"fas fa-arrow-circle-left\"></i>\n        </motion.button>\n        <Viewer\n          history={history}\n          idx={currentIndex}\n          total={data.length}\n          {...data[currentIndex]}\n          anchoredTags={anchoredTags}\n          setAnchoredTags={setAnchoredTags}\n          setCurrentIndex={setCurrentIndex}\n          openTagsDialog={() => setIsTagsDialogVisible(true)}/>\n        <motion.button\n          onClick={next}\n          initial={{ scale: 0 }}\n          animate={{\n            scale: (!isNextVisible || isTagsDialogVisible) ? 0 : 1\n          }}\n          className='my-btn-right'>\n          <i className=\"fas fa-arrow-circle-right\"></i>\n        </motion.button>\n      </main>\n      {\n        isTagsDialogVisible &&\n        <TagsDialog\n          tags={rawData.reduce(\n            (computed, item) => {\n              return [...new Set([...computed, ...item.tags])]\n            },\n            []\n          )}\n          anchoredTags={anchoredTags}\n          setAnchoredTags={setAnchoredTags}\n          onClose={() => setIsTagsDialogVisible(false)}/>\n      }\n    </>\n  );\n}\n\nexport default App;\n","\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport {\n  Route,\n  Switch,\n  Redirect,\n  BrowserRouter as Router\n} from \"react-router-dom\";\n\nimport App from './components';\n\nimport './index.css';\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  ReactDOM.render(\n    <React.StrictMode>\n      <Router>\n        <Switch>\n          <Route path=\"/\">\n            <App />\n          </Route>\n          <Route>\n            <Redirect to=\"/\"/>\n          </Route>\n        </Switch>\n      </Router>\n    </React.StrictMode>,\n    document.getElementById('AventurasEn360')\n  );\n});\n"],"sourceRoot":""}